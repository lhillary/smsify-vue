{"openapi":"3.0.0","info":{"title":"Smsify API","version":"1.0.0","description":"This is a REST API application made with Express. It manages contacts, campaigns, messages, and more for Smsify.","contact":{"name":"API Support","url":"http://www.example.com/support","email":"support@example.com"}},"servers":[{"url":"https://smsify-api-e90c6e0cdd2d.herokuapp.com","description":"Development server"}],"components":{"schemas":{"User":{"type":"object","properties":{"userId":{"type":"integer","example":1},"username":{"type":"string","example":"johndoe"},"email":{"type":"string","example":"john.doe@example.com"},"createdAt":{"type":"string","format":"date-time","example":"2021-07-21T17:32:28Z"},"lastLogin":{"type":"string","format":"date-time","example":"2021-07-22T12:34:56Z"},"passwordHash":{"type":"string","example":"hashed_password"},"deletedAt":{"type":"string","format":"date-time"},"tierId":{"type":"integer","example":2},"role":{"type":"string","example":"admin"}},"required":["userId","username","email","passwordHash","tierId","role"]},"PhoneNumber":{"type":"object","properties":{"phoneNumberId":{"type":"integer","example":100},"userId":{"type":"integer","example":1},"phoneNumber":{"type":"string","example":"+15551234567"},"country":{"type":"string","example":"USA"},"isActive":{"type":"boolean","example":true},"purchasedAt":{"type":"string","format":"date-time","example":"2021-07-21T17:32:28Z"},"deletedAt":{"type":"string","format":"date-time"},"twilioSid":{"type":"string","example":"SMXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"}},"required":["phoneNumberId","userId","phoneNumber","country","isActive","twilioSid"]},"Contact":{"type":"object","properties":{"contactId":{"type":"integer","example":300},"userId":{"type":"integer","example":1},"name":{"type":"string","example":"Jane Doe"},"phoneNumber":{"type":"string","example":"+15557654321"},"createdAt":{"type":"string","format":"date-time","example":"2021-07-21T17:32:28Z"},"deletedAt":{"type":"string","format":"date-time"}},"required":["contactId","userId","name","phoneNumber"]},"Campaign":{"type":"object","properties":{"campaignId":{"type":"integer","example":10},"userId":{"type":"integer","example":1},"phoneNumberId":{"type":"integer","example":101},"name":{"type":"string","example":"Holiday Promo"},"status":{"type":"string","example":"active"},"createdAt":{"type":"string","format":"date-time","example":"2021-08-01T17:32:28Z"},"deletedAt":{"type":"string","format":"date-time"},"description":{"type":"string","example":"Holiday promotion campaign"}},"required":["campaignId","userId","name"]},"SubscriptionTier":{"type":"object","properties":{"tierId":{"type":"integer","example":1},"tierName":{"type":"string","example":"Premium"},"description":{"type":"string","example":"Access to premium features"},"price":{"type":"number","format":"float","example":9.99}},"required":["tierId","tierName","price"]},"Message":{"type":"object","properties":{"messageId":{"type":"integer","example":500},"campaignId":{"type":"integer","example":10},"contactId":{"type":"integer","example":200},"messageContent":{"type":"string","example":"Dont miss our special holiday sale!"},"sentAt":{"type":"string","format":"date-time","example":"2021-08-02T10:00:00Z"},"status":{"type":"string","example":"sent"},"deletedAt":{"type":"string","format":"date-time"},"twilioSid":{"type":"string","example":"SMXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"}},"required":["messageId","campaignId","contactId","messageContent"]},"Response":{"type":"object","properties":{"responseId":{"type":"integer","example":600},"messageId":{"type":"integer","example":500},"responseContent":{"type":"string","example":"Yes, I am interested!"},"receivedAt":{"type":"string","format":"date-time","example":"2021-08-02T12:34:56Z"},"deletedAt":{"type":"string","format":"date-time"}},"required":["responseId","messageId","responseContent"]},"CampaignCategory":{"type":"object","properties":{"categoryId":{"type":"integer","example":700},"campaignId":{"type":"integer","example":10},"categoryLabel":{"type":"string","example":"Interested"},"createdAt":{"type":"string","format":"date-time","example":"2021-08-01T00:00:00Z"},"deletedAt":{"type":"string","format":"date-time"}},"required":["categoryId","campaignId","categoryLabel"]},"ResponseCategorization":{"type":"object","properties":{"categorizationId":{"type":"integer","example":800},"responseId":{"type":"integer","example":600},"categoryId":{"type":"integer","example":700},"deletedAt":{"type":"string","format":"date-time"}},"required":["categorizationId","responseId","categoryId"]}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}},"security":[{"bearerAuth":[]}],"paths":{"/api/v1/campaign/":{"post":{"summary":"Create a new campaign","tags":["Campaign Management"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name"],"properties":{"name":{"type":"string","description":"The name of the campaigns"},"description":{"type":"string","description":"A brief description of the campaign"},"phoneNumberId":{"type":"integer","description":"A phone number associated with the campaign"}}}}}},"responses":{"201":{"description":"Campaign created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Server error while creating campaign"}}},"get":{"summary":"Retrieve all campaigns created by the user","tags":["Campaign Management"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"An array of campaigns","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Campaign"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Server error while retrieving campaigns"}}}},"/api/v1/campaign/{campaignId}":{"get":{"summary":"Retrieve a specific campaign by ID","tags":["Campaign Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"campaignId","required":true,"schema":{"type":"integer"},"description":"The ID of the campaign to retrieve"}],"responses":{"200":{"description":"Campaign retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Campaign not found"},"500":{"description":"Server error"}}}},"/api/v1/campaign/update/{campaignId}":{"put":{"summary":"Update a specific campaign","tags":["Campaign Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"campaignId","required":true,"schema":{"type":"integer"},"description":"The ID of the campaign to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"New name of the campaign"},"description":{"type":"string","description":"New description of the campaign"},"status":{"type":"string","description":"New status of the campaign"},"phoneNumberId":{"type":"number","description":"New phone number id of the campaign"}}}}}},"responses":{"200":{"description":"Campaign updated successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Campaign not found or not updated"},"500":{"description":"Server error"}}}},"/api/v1/campaign/delete/{campaignId}":{"put":{"summary":"Delete a specific campaign","tags":["Campaign Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"campaignId","required":true,"schema":{"type":"integer"},"description":"The ID of the campaign to delete"}],"responses":{"204":{"description":"Campaign deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"No campaign found or already deleted"},"500":{"description":"Server error while deleting campaign"}}}},"/api/v1/category/":{"post":{"summary":"Add new category to a campaign","tags":["Category Management"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["campaignId","categoryLabels"],"properties":{"campaignId":{"type":"integer","description":"The ID of the campaign to which categories are added"},"categoryLabels":{"type":"array","items":{"type":"string"},"description":"List of category labels"}}}}}},"responses":{"201":{"description":"Category added successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCategory"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Failed to add categories due to server error"}}}},"/api/v1/category/by-campaign/{campaignId}":{"get":{"summary":"Retrieve all categories by campaign","tags":["category Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"campaignId","required":true,"schema":{"type":"integer"},"description":"The ID of the campaign to retrieve categories for"}],"responses":{"200":{"description":"List of all categories associated with the campaign","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CampaignCategory"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Server error"}}}},"/api/v1/category/update/{categoryId}":{"put":{"summary":"Update an existing category","tags":["Category Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"categoryId","required":true,"schema":{"type":"integer"},"description":"The ID of the category to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"newLabel":{"type":"string","description":"The new label for the category"}}}}}},"responses":{"200":{"description":"Category updated successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Category not found or update failed"},"500":{"description":"Server error while updating category"}}}},"/api/v1/category/delete/{categoryId}":{"put":{"summary":"Delete a category","tags":["Category Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"categoryId","required":true,"schema":{"type":"integer"},"description":"The ID of the category to delete"}],"responses":{"200":{"description":"Category deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"Category not found or already deleted"},"500":{"description":"Server error while deleting category"}}}},"/api/v1/contact/":{"post":{"summary":"Create a new contact","tags":["Contact Management"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","phoneNumber","campaignId"],"properties":{"name":{"type":"string","description":"The name of the contact"},"phoneNumber":{"type":"string","description":"The phone number of the contact"},"campaignId":{"type":"integer","description":"The ID of the campaign this contact is associated with"}}}}}},"responses":{"201":{"description":"Contact created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Contact"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Server error while creating contact"}}},"get":{"summary":"Retrieve all contacts","tags":["Contact Management"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of all contacts","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Contact"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Server error"}}}},"/api/v1/contact/by-campaign/{campaignId}":{"get":{"summary":"Retrieve all contacts by campaign","tags":["Contact Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"campaignId","required":true,"schema":{"type":"integer"},"description":"The ID of the campaign to retrieve contacts for"}],"responses":{"200":{"description":"List of all contacts associated with the campaign","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Contact"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Server error"}}}},"/api/v1/contact/update/{contactId}":{"put":{"summary":"Update an existing contact","tags":["Contact Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"contactId","required":true,"schema":{"type":"integer"},"description":"The ID of the contact to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"Updated name of the contact"},"phoneNumber":{"type":"string","description":"Updated phone number of the contact"}}}}}},"responses":{"200":{"description":"Contact updated successfully"},"401":{"description":"Unauthorized"},"404":{"description":"No contact found or already deleted"},"500":{"description":"Server error"}}}},"/api/v1/contact/delete/{contactId}":{"put":{"summary":"Delete a contact","tags":["Contact Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"contactId","required":true,"schema":{"type":"integer"},"description":"The ID of the contact to delete"}],"responses":{"204":{"description":"Contact deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"No contact found or already deleted"},"500":{"description":"Server error"}}}},"/api/v1/phone-number/available-numbers":{"get":{"summary":"List available Twilio phone numbers that match the search criteria","tags":["Phone Number Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"searchTerm","required":false,"schema":{"type":"string"},"description":"Optional search term for filtering phone numbers (e.g., '510555')"}],"responses":{"200":{"description":"List of available phone numbers from Twilio","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"friendlyName":{"type":"string"},"phoneNumber":{"type":"string"}}}}}}},"500":{"description":"Error retrieving phone numbers"}}}},"/api/v1/phone-number/purchase-number":{"post":{"summary":"Purchase and register a new phone number","tags":["Phone Number Management"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["phoneNumber","country"],"properties":{"phoneNumber":{"type":"string","description":"The phone number to be purchased"},"country":{"type":"string","description":"The country of the phone number"}}}}}},"responses":{"200":{"description":"Phone number purchased and registered successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PhoneNumber"}}}},"401":{"description":"Unauthorized"},"500":{"description":"Failed to purchase phone number"}}}},"/api/v1/phone-number/user-numbers":{"get":{"summary":"Retrieve all phone numbers associated with the authenticated user","tags":["Phone Number Management"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of phone numbers associated with the user","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PhoneNumber"}}}}},"401":{"description":"Unauthorized"},"500":{"description":"Error retrieving user's phone numbers"}}}},"/api/v1/phone-number/delete/{phoneNumberId}":{"put":{"summary":"Deactivate a registered phone number","tags":["Phone Number Management"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"phoneNumberId","required":true,"schema":{"type":"integer"},"description":"The ID of the phone number to deactivate"}],"responses":{"200":{"description":"Phone number deactivated successfully"},"404":{"description":"Phone number not found"},"500":{"description":"Failed to deactivate phone number"}}}},"/api/v1/sms/sendBulk":{"post":{"summary":"Send bulk SMS to all contacts in a campaign","tags":["SMS"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["campaignId","messageContent","twilioNumber"],"properties":{"campaignId":{"type":"integer","description":"The ID of the campaign"},"messageContent":{"type":"string","description":"The content of the message to send"},"twilioNumber":{"type":"string","description":"The Twilio phone number to send from"}}}}}},"responses":{"201":{"description":"Bulk SMS sent successfully"},"500":{"description":"Error sending SMS"}}}},"/api/v1/sms/receive":{"post":{"summary":"Receive incoming SMS responses","tags":["SMS"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"Body":{"type":"string","description":"The content of the incoming SMS"},"MessageSid":{"type":"string","description":"The Twilio SID associated with the message"}}}}}},"responses":{"200":{"description":"Received and processed the response successfully"},"404":{"description":"Original message not found"},"500":{"description":"Error processing received SMS"}}}},"/api/v1/sms/status":{"post":{"summary":"Handle message status updates from Twilio","tags":["SMS"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"MessageSid":{"type":"string","description":"The Twilio SID of the message"},"MessageStatus":{"type":"string","description":"The current status of the message"}}}}}},"responses":{"200":{"description":"Status updated successfully"},"500":{"description":"Failed to update status"}}}},"/api/v1/sms/responses/{campaignId}":{"get":{"summary":"Fetch all responses for a specific campaign","tags":["SMS"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"campaignId","required":true,"schema":{"type":"integer"},"description":"The campaign ID to fetch responses for"}],"responses":{"200":{"description":"A list of responses","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Response"}}}}},"404":{"description":"No responses found or campaign does not exist"},"500":{"description":"Failed to fetch responses"}}}},"/api/v1/sms/messages/{campaignId}":{"get":{"summary":"Fetch all messages sent in a specific campaign","tags":["SMS"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"campaignId","required":true,"schema":{"type":"integer"},"description":"The campaign ID to fetch messages for"}],"responses":{"200":{"description":"A list of messages","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Message"}}}}},"404":{"description":"No messages found for this campaign"},"500":{"description":"Failed to fetch messages"}}}},"/api/v1/subscription/":{"post":{"summary":"Create a new subscription tier","tags":["Subscription Tiers"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","description","price"],"properties":{"name":{"type":"string"},"description":{"type":"string"},"price":{"type":"number","format":"double"}}}}}},"responses":{"201":{"description":"Subscription tier created successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscriptionTier"}}}},"500":{"description":"Error creating subscription tier"}}},"get":{"summary":"Retrieve all subscription tiers","tags":["Subscription Tiers"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"List of subscription tiers","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SubscriptionTier"}}}}},"500":{"description":"Server error while retrieving subscription tiers"}}}},"/api/v1/subscription/update/{tierId}":{"put":{"summary":"Update a subscription tier","tags":["Subscription Tiers"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tierId","required":true,"schema":{"type":"integer"},"description":"The ID of the subscription tier to update"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"price":{"type":"number","format":"double"}}}}}},"responses":{"200":{"description":"Subscription tier updated successfully"},"404":{"description":"Subscription tier not found or update failed"},"500":{"description":"Server error while updating subscription tier"}}}},"/api/v1/subscription/delete/{tierId}":{"delete":{"summary":"Delete a subscription tier","tags":["Subscription Tiers"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"tierId","required":true,"schema":{"type":"integer"},"description":"The ID of the subscription tier to delete"}],"responses":{"204":{"description":"Subscription tier deleted successfully"},"404":{"description":"Subscription tier not found or already deleted"},"500":{"description":"Server error while deleting subscription tier"}}}},"/api/v1/user/register":{"post":{"summary":"Register a new user","tags":["Users"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["username","email","password"],"properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"201":{"description":"User registered successfully","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"token":{"type":"string"}}}}}},"400":{"description":"Email already in use"},"500":{"description":"Server error"}}}},"/api/v1/user/login":{"post":{"summary":"Authenticate user and return JWT and user details","tags":["Users"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","example":"useratexample.com"},"password":{"type":"string","example":"yourpassword"}}}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Logged in successfully"},"token":{"type":"string","example":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."},"user":{"type":"object","properties":{"userId":{"type":"integer","example":1},"username":{"type":"string","example":"johndoe"},"email":{"type":"string","example":"johndoeatexample.com"},"role":{"type":"string","example":"admin"},"tierId":{"type":"integer","example":2}}}}}}}},"401":{"description":"Login failed","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Login failed"}}}}}},"500":{"description":"Server error"}}}},"/api/v1/user/{userId}":{"get":{"summary":"Retrieve a specific user by ID","tags":["Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"userId","required":true,"schema":{"type":"integer"},"description":"The ID of the user to retrieve"}],"responses":{"200":{"description":"User retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"401":{"description":"Unauthorized"},"404":{"description":"Campaign not found"},"500":{"description":"Server error"}}}},"/api/v1/user/update":{"put":{"summary":"Update user information","tags":["Users"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"username":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"}}}}}},"responses":{"200":{"description":"User updated successfully"},"400":{"description":"No update data provided"},"401":{"description":"Unauthorized"},"500":{"description":"Server error"}}}},"/api/v1/user/delete":{"delete":{"summary":"Delete a user","tags":["Users"],"security":[{"bearerAuth":[]}],"responses":{"204":{"description":"User deleted successfully"},"401":{"description":"Unauthorized"},"404":{"description":"No user found or already deleted"},"500":{"description":"Server error"}}}}},"tags":[]}